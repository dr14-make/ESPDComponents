# ============================================================================
# Wheel Component Tests
# ============================================================================
#
# This file contains test harnesses for the Wheel component.
#
# Required Tests:
#   1. Kinematic verification (v = ω × r)
#   2. Force-torque relationship (F = τ / r)
#   3. Power conservation
#
# Reference: Documentation/Wheel.md
# ============================================================================

# ============================================================================
# TEST 1: Kinematic Verification
# ============================================================================
# Objective: Verify rolling-without-slip constraint
# Expected: Linear velocity = angular velocity × radius

test component TestWheel_Kinematics
  # TODO: Instantiate your Wheel component
  # wheel = Wheel(radius = 0.3)
  
  # TODO: Apply constant angular velocity
  # speed_source = RotationalComponents.Speed()
  # speed_cmd = BlockComponents.Constant(k = 10.0)  # 10 rad/s
  
  # TODO: Connect to vehicle body mass
  # body = TranslationalComponents.Mass(m = 1000.0)
  # ground = TranslationalComponents.Fixed()
  
relations
  # TODO: Connect components
  # connect(speed_cmd.y, speed_source.w_input)
  # connect(speed_source.flange, wheel.flange_rot)
  # connect(wheel.flange_trans, body.flange)
  # connect(body.flange, ground.flange)
  
  # TODO: Set initial conditions
  
  # VALIDATION (calculate BEFORE running):
  # With omega = 10 rad/s, radius = 0.3 m:
  # - Expected linear velocity: v = omega * r = ? m/s
  # - Should reach steady state quickly
  # - Power balance: tau*omega = F*v
end

# TODO: Add analysis

# ============================================================================
# TEST 2: Force-Torque Relationship
# ============================================================================
# Objective: Verify F = τ / r
# Expected: Steady-state force proportional to torque

test component TestWheel_ForceTorque
  # TODO: Implement test with torque source
  # Apply constant torque
  # Connect to mass with damping (load)
  # Verify force relationship
  
relations
  # TODO: Implement
  
  # VALIDATION (calculate BEFORE running):
  # Applied torque τ
  # Expected force F = τ / r
  # Steady-state velocity where F = damping*v
  # Power balance check
end

# TODO: Add analysis

# ============================================================================
# TEST 3: Wheel with Inertia (If Implemented)
# ============================================================================
# Objective: Verify rotational dynamics
# Expected: Angular acceleration matches J*α = τ

test component TestWheel_Inertia
  # TODO: Implement if wheel has inertia
  # Apply step torque
  # Observe angular acceleration
  # Verify J*alpha = tau_net
  
relations
  # TODO: Implement
  
  # VALIDATION:
  # Expected angular acceleration: α = τ / J
  # Linear acceleration: a = α * r
end

# TODO: Add analysis

# ============================================================================
# VALIDATION CHECKLIST
# ============================================================================
#
# [ ] Kinematic constraint verified (v = ω*r within tolerance)
# [ ] Force-torque relationship verified (F = τ/r within tolerance)  
# [ ] Power conservation verified (|P_rot - P_trans| < 0.1%)
# [ ] No slip occurs (constraint satisfied)
# [ ] Transient behavior physically reasonable
#
# ============================================================================
