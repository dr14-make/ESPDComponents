### DO NOT EDIT THIS FILE
### This file is auto-generated by the Dyad command-line compiler.
### If you edit this code it is likely to get overwritten.
### Instead, update the Dyad source code and regenerate this file


using DyadInterface

@kwdef mutable struct ElectricVehicle_Comparison_AnalysisSpec <: AbstractTransientAnalysisSpec
  name::Symbol = :ElectricVehicle_Comparison_Analysis
  var"alg"::String = "Rodas5P"
  var"start"::Float64 = 0
  var"stop"::Float64 = 20
  var"abstol"::Float64 = 0.000001
  var"reltol"::Float64 = 0.000001
  var"saveat"::Float64 = 0
  var"dtmax"::Float64 = 0
  var"IfLifting"::Bool = false
  # ============================================================================
  # Electric Vehicle Comparison Test
  # ============================================================================
  # 
  # This integration test runs electric powertrain for performance comparison.
  # 
  # Purpose:
  # - EV performance measurement
  # - Energy efficiency measurement
  # - Acceleration and top speed measurement
  # - Compare against conventional powertrain
  # 
  # Note: Requires all electric components to be implemented!
  # Run this AFTER individual component tests pass.
  # 
  # ============================================================================
  # TODO: Implement electric powertrain comparison test
  # Electric powertrain components needed:
  # - battery = Battery(V_nominal = 400.0, Q_capacity = 75.0, ...)
  # - motor = ElectricMotor(K_e = 0.1, K_t = 0.1, ...)
  # - motor_controller = MotorController(...)
  # - differential_elec = Differential(ratio = 3.5)
  # - wheel_left_elec = Wheel(radius = 0.3)
  # - wheel_right_elec = Wheel(radius = 0.3)
  # - brake_left_elec = Brake(tau_max = 2000.0)
  # - brake_right_elec = Brake(tau_max = 2000.0)
  # - vehicle_elec = VehicleBody(m = 1500.0, Cd = 0.28, A = 2.2, ...)
  # 
  # Control inputs (same as conventional for fair comparison):
  # - throttle_cmd = BlockComponents.Constant(k = 0.5)
  # - brake_cmd = BlockComponents.Constant(k = 0.0)
  # - ground_mech = TranslationalComponents.Fixed()
  # - ground_elec = ElectricalComponents.Ground()
  # TODO: Add analysis when component is implemented
  # analysis ElectricVehicle_Comparison_Analysis
  # extends TransientAnalysis(stop = 20.0, alg = "Rodas5P")
  # model = ElectricVehicle_Comparison()
  # end
  var"model"::Union{Nothing, System} = ESPDComponents.VehicleDynamics.IntegrationTests.ElectricVehicle_Comparison(; name=:ElectricVehicle_Comparison)
end

function DyadInterface.run_analysis(spec::ElectricVehicle_Comparison_AnalysisSpec)
  spec.model = DyadInterface.update_model(spec.model, (; ))
  base_spec = TransientAnalysisSpec(;
    name=:TransientAnalysis, alg=spec.alg, start=spec.start, stop=spec.stop, abstol=spec.abstol, reltol=spec.reltol, saveat=spec.saveat, dtmax=spec.dtmax, IfLifting=spec.IfLifting, model=spec.model
  )
  run_analysis(base_spec)
end

ElectricVehicle_Comparison_Analysis(;kwargs...) = run_analysis(ElectricVehicle_Comparison_AnalysisSpec(;kwargs...))
export ElectricVehicle_Comparison_Analysis, ElectricVehicle_Comparison_AnalysisSpec
export ElectricVehicle_Comparison_AnalysisSpec, ElectricVehicle_Comparison_Analysis
