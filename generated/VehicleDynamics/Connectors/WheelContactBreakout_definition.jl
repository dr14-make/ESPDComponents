### DO NOT EDIT THIS FILE
### This file is auto-generated by the Dyad command-line compiler.
### If you edit this code it is likely to get overwritten.
### Instead, update the Dyad source code and regenerate this file


@doc Markdown.doc"""
   WheelContactBreakout(; name)

============================================================================
WheelContact Breakout Component
============================================================================

Purpose: Adapter component to connect WheelContact to standard library flanges
Use Case: Testing Wheel and VehicleBody components with standard library sources/sensors

This component "breaks out" the combined WheelContact interface into two
separate standard Flange connections, allowing you to use standard library
components (Force, Mass, Fixed, etc.) in test harnesses.

Example Usage:

test component TestVehicleBody_WithStandardLib
body = VehicleBody()

# Break out WheelContact to standard flanges
front_breakout = WheelContactBreakout()
rear_breakout = WheelContactBreakout()

# Now use standard library components
front_force = TranslationalComponents.Force()
front_mass = TranslationalComponents.Mass(m = 750.0)
ground = TranslationalComponents.Fixed()

relations
# Connect body to breakout
connect(body.contact_front, front_breakout.contact)

# Connect breakout to standard library
connect(front_force.flange, front_breakout.flange_traction)
connect(front_breakout.flange_traction, front_mass.flange)
connect(front_breakout.flange_normal, ground.flange)
end

Sign Conventions:
- WheelContact uses flow variables (sum at connection points)
- Standard Flanges use flow variables
- This component handles the sign mapping transparently

============================================================================

## Connectors

 * `contact` - ============================================================================
WheelContact Connector
============================================================================

This connector represents the mechanical interface between a wheel and
vehicle body, combining both traction (tangential) and normal (vertical)
forces along with their corresponding positions.

Physical Interpretation:
- s_traction: Longitudinal position of the contact point [m]
- f_traction: Traction force (tangential to road, propels vehicle) [N]
- s_normal: Vertical position of the contact point [m] (typically fixed)
- f_normal: Normal force (perpendicular to road, load on wheel) [N]

Sign Conventions:
- f_traction > 0: Force pushing vehicle forward (from wheel perspective)
- f_normal > 0: Force pushing wheel down (weight on wheel)

Usage Example:
In Wheel component:
contact = WheelContact()  # Connect to vehicle body
# Wheel receives: N = -contact.f_normal (normal force from body)
# Wheel provides: F_traction via contact.f_traction

In VehicleBody component:
contact_rear = WheelContact()  # Connect to rear wheels
# Body provides: N via contact_rear.f_normal
# Body receives: F_traction from wheels via contact_rear.f_traction

Connection Pattern:
connect(wheel_left.contact, vehicle.contact_rear)
connect(wheel_right.contact, vehicle.contact_rear)

This single connection handles BOTH traction and normal forces automatically!

============================================================================ ([`WheelContact`](@ref))
 * `flange_traction` - This connector represents a mechanical flange with position and force as the potential and flow variables, respectively. ([`Flange`](@ref))
 * `flange_normal` - This connector represents a mechanical flange with position and force as the potential and flow variables, respectively. ([`Flange`](@ref))
"""
@component function WheelContactBreakout(; name)
  __params = Any[]
  __vars = Any[]
  __systems = System[]
  __guesses = Dict()
  __defaults = Dict()
  __initialization_eqs = []
  __eqs = Equation[]

  ### Symbolic Parameters

  ### Variables

  ### Constants
  __constants = Any[]

  ### Components
  push!(__systems, @named contact = ESPDComponents.VehicleDynamics.Connectors.WheelContact())
  push!(__systems, @named flange_traction = __Dyad__Flange())
  push!(__systems, @named flange_normal = __Dyad__Flange())

  ### Guesses

  ### Defaults

  ### Initialization Equations

  ### Assertions
  __assertions = []

  ### Equations
  # Map traction: WheelContact <-> Standard Flange
  # Position coupling (both represent same physical location)
  push!(__eqs, flange_traction.s ~ contact.s_traction)
  # Force coupling (flow variables - opposite signs due to "into component" convention)
  push!(__eqs, flange_traction.f ~ -contact.f_traction)
  # Map normal: WheelContact <-> Standard Flange
  # Position coupling
  push!(__eqs, flange_normal.s ~ contact.s_normal)
  # Force coupling
  push!(__eqs, flange_normal.f ~ -contact.f_normal)

  # Return completely constructed System
  return System(__eqs, t, __vars, __params; systems=__systems, defaults=__defaults, guesses=__guesses, name, initialization_eqs=__initialization_eqs, assertions=__assertions)
end
export WheelContactBreakout
